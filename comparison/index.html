<html>
<body>

<script
  defer
  src="index.js"
></script>
<link
  rel="stylesheet"
  href="styles.css"
/>

<script>
	function mongoose()
	{
		const files = [
			"Pic01.png",
			"Pic02.png",
			"Pic03.png",
			"Pic04.png",
			"Pic05.png",
			"Pic06.png",
			"Pic07.png",
			"Pic08.png",
			"Pic09.png",
			"Pic10.png",
			"Pic11.png",
			"Pic12.png",
			"Pic13.png",
			"Pic14.png",
			"Pic15.png",
			"Pic16.png",
			"Pic17.png",
			"Pic18.png",
			"Pic19.png",
		];
		const compDiv = document.getElementById('comparisons');
		const setARadio = document.querySelector('input[name="setA"]:checked');
		const setBRadio = document.querySelector('input[name="setB"]:checked');
		
		if (!setARadio || !setBRadio) {
			alert('Please select both sets.');
			return;
		}
		
		const setA = setARadio.value;
		const setB = setBRadio.value;
		
	    let htmlContent = '';
	    
	    files.forEach(file => {
			htmlContent += `
			<img-comparison-slider name="${file}">
				<img width="100%" slot="first" src="imagesets/${setA}/${file}" style="background-color: black" />
				<img width="100%" slot="second" src="imagesets/${setB}/${file}" style="background-color: black" />
			</img-comparison-slider>
		`;
	    });
		
		compDiv.innerHTML = htmlContent;
		updateURLParameters();
	}
</script>

<style>
	.set-label {
		border-radius: 1em;
		padding: 0.11em;  
		padding-right: 0.5em;
		background-color: lightblue;
	}
	
	.set-option {
		margin: 0.66em
	}
	
	.tooltip {
		position: relative;
		cursor: pointer;
		border-bottom: 1px dotted black;  
	}

	.tooltip::before {
		content: attr(data-tooltip);  
		position: absolute;
		bottom: 150%;  
		left: 15%;
		transform: translateX(-15%);
		background-color: black;
		color: white;
		padding: 5px;
		border-radius: 5px;
		white-space: normal;
		opacity: 0;
		visibility: hidden;
		transition: opacity 0.3s;
		z-index: 999;
		font-size: 12px;
		pointer-events: none;
		width: 20em;
		word-wrap: break-word; 
		text-align: center;
	}

	.tooltip:hover::before {
		opacity: 1;
		visibility: visible;
	}
</style>

<table>
	<tr>
		<td valign="top" style="border-right: 1px solid">
			<div style="position: sticky; z-index:999; top: 0px; white-space:nowrap">
			<form style="padding-right: 1.5em">
				<h3 style="margin-bottom: 0.33em">Set (A) selection:</h3>
				<label class="set-label">
					<input class="set-option" name="setA" type="radio" value="00_debug" >
						Debug 
						<span class="tooltip" data-tooltip="Captures from the renderer, with full rasterization (ie no RTX Remix).">ℹ️</span> 
					</input>
				</label><br/>
				<label class="set-label">
					<input class="set-option" name="setA" type="radio" value="00_original" checked>
						Original 
						<span class="tooltip" data-tooltip="Captures from the original game, using the OpenGL renderer.">ℹ️</span> 
					</input>
				</label><br/>
				<label class="set-label">
					<input class="set-option" name="setA" type="radio" value="01_v0.3.2" >
						EchelonRenderer v0.3.2 
						<span class="tooltip" data-tooltip="EchelonRenderer v0.3.2: default RTX values for roughness and metallic (ie 0.5), and scaled attenuation values. Seems too bright. Default unauthored textures.">ℹ️</span> 
					</input>
				</label><br/>
				<label class="set-label">
					<input class="set-option" name="setA" type="radio" value="04_v0.3.3-att0035" >
						EchelonRenderer v0.3.3 - att0035 
						<span class="tooltip" data-tooltip="EchelonRenderer v0.3.3: lowered default roughness and metallic values (0.9 roughness, 0.55 metallic), attenuation: 0.0/0.0035/0.0. Default unauthored textures.">ℹ️</span> 
					</input>
				</label><br/>
				<label class="set-label">
					<input class="set-option" name="setA" type="radio" value="05_v0.3.4-att0035" >
						EchelonRenderer v0.3.4 - att00035 
						<span class="tooltip" data-tooltip="EchelonRenderer v0.3.4: different attenuation values. Default unauthored textures.">ℹ️</span> 
					</input>
				</label><br/>
				<label class="set-label">
					<input class="set-option" name="setA" type="radio" value="08_v0.3.5" >
						EchelonRenderer v0.3.5 
						<span class="tooltip" data-tooltip="EchelonRenderer v0.3.4: final rtx.conf and attenuation values. Default unauthored textures.">ℹ️</span> 
					</input>
				</label><br/>
				<label class="set-label">
					<input class="set-option" name="setA" type="radio" value="09_v0.3.6-skybox" >
						EchelonRenderer v0.3.6 - Skybox 
						<span class="tooltip" data-tooltip="EchelonRenderer v0.3.6: Skybox fixed.">ℹ️</span> 
					</input>
				</label><br/>
				<label class="set-label">
					<input class="set-option" name="setA" type="radio" value="10_v0.3.7" >
						EchelonRenderer v0.3.7 
						<span class="tooltip" data-tooltip="EchelonRenderer v0.3.7">ℹ️</span> 
					</input>
				</label><br/>
				<label class="set-label">
					<input class="set-option" name="setA" type="radio" value="11_v0.3.8" >
						EchelonRenderer v0.3.8 
						<span class="tooltip" data-tooltip="EchelonRenderer v0.3.8">ℹ️</span> 
					</input>
				</label><br/>
				
				<h3 style="margin-bottom: 0.33em">Set (B) selection:</h3>
				<label class="set-label">
					<input class="set-option" name="setB" type="radio" value="00_debug" >
						Debug
						<span class="tooltip" data-tooltip="Captures from the renderer, with full rasterization (ie no RTX Remix).">ℹ️</span> 
					</input>
				</label><br/>
				<label class="set-label">
					<input class="set-option" name="setB" type="radio" value="00_original" >
						Original
						<span class="tooltip" data-tooltip="Captures from the original game, using the OpenGL renderer.">ℹ️</span> 
					</input>
				</label><br/>
				<label class="set-label">
					<input class="set-option" name="setB" type="radio" value="01_v0.3.2" >
						EchelonRenderer v0.3.2
						<span class="tooltip" data-tooltip="EchelonRenderer v0.3.2: default RTX values for roughness and metallic (ie 0.5), and scaled attenuation values. Seems too bright. Default unauthored textures.">ℹ️</span> 
					</input>
				</label><br/>
				<label class="set-label">
					<input class="set-option" name="setB" type="radio" value="04_v0.3.3-att0035" checked>
						EchelonRenderer v0.3.3 - att0035
						<span class="tooltip" data-tooltip="EchelonRenderer v0.3.3: lowered default roughness and metallic values (0.9 roughness, 0.55 metallic), attenuation: 0.0/0.0035/0.0. Default unauthored textures.">ℹ️</span> 
					</input>
				</label><br/>
				<label class="set-label">
					<input class="set-option" name="setB" type="radio" value="05_v0.3.4-att0035" >
						EchelonRenderer v0.3.4 - att00035
						<span class="tooltip" data-tooltip="EchelonRenderer v0.3.4: different attenuation values. Default unauthored textures.">ℹ️</span> 
					</input>
				</label><br/>
				<label class="set-label">
					<input class="set-option" name="setB" type="radio" value="08_v0.3.5" checked>
						EchelonRenderer v0.3.5
						<span class="tooltip" data-tooltip="EchelonRenderer v0.3.4: final rtx.conf and attenuation values. Default unauthored textures.">ℹ️</span> 
					</input>
				</label><br/>
				<label class="set-label">
					<input class="set-option" name="setB" type="radio" value="09_v0.3.6-skybox" >
						EchelonRenderer v0.3.6 - Skybox
						<span class="tooltip" data-tooltip="EchelonRenderer v0.3.6: Skybox fixed.">ℹ️</span> 
					</input>
				</label><br/>
				<label class="set-label">
					<input class="set-option" name="setB" type="radio" value="10_v0.3.7" >
						EchelonRenderer v0.3.7
						<span class="tooltip" data-tooltip="EchelonRenderer v0.3.7">ℹ️</span> 
					</input>
				</label><br/>
				<label class="set-label">
					<input class="set-option" name="setB" type="radio" value="11_v0.3.8" checked>
						EchelonRenderer v0.3.8
						<span class="tooltip" data-tooltip="EchelonRenderer v0.3.8">ℹ️</span> 
					</input>
				</label><br/>
				<br/>
				<input name="ok" type="button" value="OK" onclick="mongoose()"/>
			</form>
			</div>
		</td>
		
		<td>
			<div id="comparisons">
			</div>
		</td>
	</tr>
</table>

    <script>
        function updateURLParameters() {
            const setA = document.querySelector('input[name="setA"]:checked').value;
            const setB = document.querySelector('input[name="setB"]:checked').value;
            const newUrl = `${window.location.pathname}?setA=${setA}&setB=${setB}`;
            window.history.replaceState(null, '', newUrl);
        }

        function setDefaultSelections() {
            const urlParams = new URLSearchParams(window.location.search);
            const setA = urlParams.get('setA');
            const setB = urlParams.get('setB');

            if (setA) {
                const setAOption = document.querySelector(`input[name="setA"][value="${setA}"]`);
                if (setAOption) setAOption.checked = true;
            }

            if (setB) {
                const setBOption = document.querySelector(`input[name="setB"][value="${setB}"]`);
                if (setBOption) setBOption.checked = true;
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            setDefaultSelections();

            document.querySelectorAll('input[name="setA"]').forEach((input) => {
                input.addEventListener('change', updateURLParameters);
            });

            document.querySelectorAll('input[name="setB"]').forEach((input) => {
                input.addEventListener('change', updateURLParameters);
            });
        });
    </script>
	
</body>
</html>
